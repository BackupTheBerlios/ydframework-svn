var currentAjaxAutocompleter;function autocompleterOpen(values){return currentAjaxAutocompleter.displayDiv(values);}function autocompleterClose(){return currentAjaxAutocompleter.hideDiv();} function AutoSuggest(elementID,divID,suggestions,widthPX){var me=this;this.elem=document.getElementById(elementID);this.suggestions=suggestions;this.eligible=new Array();this.inputText=null;this.highlighted=-1;this.div=document.getElementById(divID);this.widthPX=widthPX;var TAB=13;var ESC=27;var KEYUP=38;var KEYDN=40;var mouseISout=true;this.elem.onblur=function(){if(mouseISout){me.hideDiv();}}; this.elem.onclick=function(){me.hideDiv();}; this.elem.setAttribute("autocomplete","off");if(!this.elem.id){var id="autosuggest"+idCounter;idCounter++;this.elem.id=id;}; this.elem.onkeydown=function(ev){var key=me.getKeyCode(ev);switch(key){case TAB:me.useSuggestion(true);break;case ESC:me.hideDiv();break;case KEYUP:if (me.highlighted < 0) {me.highlighted = me.eligible.length;} else if (me.highlighted == 0){me.highlighted = me.eligible.length;}if(me.highlighted>0){me.highlighted--;}; me.changeHighlight(key);break;case KEYDN:if (me.highlighted == me.eligible.length - 1){me.highlighted = 0;} else if(me.highlighted<(me.eligible.length-1)){me.highlighted++;}; me.changeHighlight(key);break;}};this.elem.onkeyup=function(ev){var key=me.getKeyCode(ev);switch(key){case TAB:case ESC:case KEYUP:case KEYDN:return;default:if(this.value.length>0){me.inputText=this.value;if(suggestions!=null){me.displayDiv(null);} else{me.ajax();}} else {me.hideDiv();}}};this.displayDiv=function(newsuggestions){me.getEligible(newsuggestions);me.createDiv();me.positionDiv();me.showDiv();}; this.useSuggestion=function(useFocus){if(this.highlighted>-1){this.elem.value=this.eligible[this.highlighted];this.hideDiv();setTimeout("document.getElementById('"+this.elem.id+"').focus()",0);}};this.showDiv=function(){this.div.style.display='block';};this.hideDiv=function(){this.div.style.display='none';this.highlighted=-1;};this.changeHighlight=function(){var lis=this.div.getElementsByTagName('LI');for(i in lis){var li=lis[i];if(this.highlighted==i){li.className="selected";} else {try{li.className="";}catch(e){}}}};this.positionDiv=function(){var el=this.elem;var x=0;var y=el.offsetHeight;while(el.offsetParent&&el.tagName.toUpperCase()!='BODY'){x+=el.offsetLeft;y+=el.offsetTop;el=el.offsetParent;} x+=el.offsetLeft;y+=el.offsetTop;this.div.style.left=x+'px';this.div.style.top=y+'px';};this.createDiv=function(){var ul=document.createElement('ul');for(i in this.eligible){var word=this.eligible[i];var li=document.createElement('li');var a=document.createElement('a');a.href="javascript:false";a.innerHTML=word;li.appendChild(a);if(me.highlighted==i){li.className="selected";} ul.appendChild(li);}; this.div.replaceChild(ul,this.div.childNodes[0]);this.div.onmouseout=function(){mouseISout=true;}; ul.onmouseover=function(ev){mouseISout=false;var target=me.getEventSource(ev);while(target.parentNode&&target.tagName.toUpperCase()!='LI'){target=target.parentNode;} var lis=me.div.getElementsByTagName('LI');for(i in lis){var li=lis[i];if(li==target){me.highlighted=i;break;}} me.changeHighlight();};ul.onclick=function(ev){me.useSuggestion(true);me.hideDiv();me.cancelEvent(ev);return false;};this.div.className="suggestion_list";this.div.style.position='absolute';};this.getEligible=function(newsuggestions){if(newsuggestions!=null){this.eligible=newsuggestions;return;}; this.eligible=new Array();for(i in this.suggestions){var suggestion=this.suggestions[i];if(suggestion.toLowerCase().indexOf(this.inputText.toLowerCase())=="0"){this.eligible[this.eligible.length]=suggestion;}}};this.getKeyCode=function(ev){if(ev){return ev.keyCode;} if(window.event){return window.event.keyCode;}};this.getEventSource=function(ev){if(ev){return ev.target;} if(window.event){return window.event.srcElement;}};this.cancelEvent=function(ev){if(ev){ev.preventDefault();ev.stopPropagation();} if(window.event){window.event.returnValue=false;}}} var idCounter=0;