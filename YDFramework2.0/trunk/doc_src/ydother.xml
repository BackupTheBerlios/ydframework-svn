<?xml version='1.0' encoding="ISO-8859-1"?>
<chapter id="ydother">

    <title>Other classes and modules</title>

    <para>In this chapter, we will discuss some of the smaller classes and modules. There are a whole bunch of small extra things in the Yellow Duck Framework that take care of some very specific functions. Most of these classes are not rocket science, but they make that you don't have to reinvent the wheel every time you need them.</para>

    <note>All the classes ending with "Util" are stored in the YDUtil include file.</note>

    <sect1 id="ydother_ydarrayutil">

        <title>YDArrayUtil</title>

        <para>The YDArrayUtil module houses all the different function related to handling of arrays. Currently, there is only one function in this module which converts a single-dimension array to a two-dimension array (table). Let's take a look at an example.</para>

        <para>The original array looked as follows:</para>

        <programlisting><![CDATA[<?php

    array (
        0 => 1,
        1 => 2,
        2 => 3,
        3 => 4,
        4 => 5,
        5 => 6,
        6 => 7,
    )

?>]]></programlisting>

        <para>Let's say we want to convert it to a table with 3 columns, we can do the following:</para>

        <programlisting><![CDATA[<?php

    YDArrayUtil::convertToTable( $array, 3 );

?>]]></programlisting>

        <para>The new array will look as follows:</para>

        <programlisting><![CDATA[<?php

    array (
        0 => 
        array (
            0 => 1,
            1 => 2,
            2 => 3,
        ),
        1 => 
        array (
            0 => 4,
            1 => 5,
            2 => 6,
        ),
        2 => 
        array (
            0 => 7,
        ),
    )

?>]]></programlisting>

        <para>There is a switch for the convertToTable that can fill the last row with null values so that it matches the correct number of columns.</para>

        <para>This function was primarly made for use in things such as image galleries that need to display their contents in columns. It can of course be used for a lot more than just image galleries.</para>

        <para>The second function, convertToNested, converts the given array to a nested array using the values from the specified column name. Let's have a look at the following sample array:</para>

        <programlisting><![CDATA[<?php

    $array = array(
        array( 'id' => 1, 'name' => 'Pieter', 'group' => 'admin' ),
        array( 'id' => 2, 'name' => 'Fiona', 'group' => 'admin' ),
        array( 'id' => 3, 'name' => 'Bert', 'group' => 'user' ),
        array( 'id' => 3, 'name' => 'Jan', 'group' => 'guest' ),
    );

?>]]></programlisting>

        <para>The array shown above has for each subarray a value named group. Let's say we want to use the value of the group column to create the nested array, we can use the following function call:</para>

        <programlisting><![CDATA[<?php

    YDArrayUtil::convertToNested( $array, 'group' );

?>]]></programlisting>

        <para>This will give us the following result:</para>

        <programlisting><![CDATA[<?php

    array (
        'admin' => 
        array (
            0 => 
            array(
                'id' => 1, 'name' => 'Pieter', 'group' => 'admin'
            ),
            1 => 
            array(
                'id' => 2, 'name' => 'Fiona', 'group' => 'admin'
            ),
        ),
        'user' => 
        array (
            0 => 
            array(
                'id' => 3, 'name' => 'Bert', 'group' => 'user'
            ),
        ),
        'guest' => 
        array (
            0 => 
            array(
                'id' => 3, 'name' => 'Jan', 'group' => 'guest'
            ),
        ),
    )

?>]]></programlisting>

        <note>The original column will not be stripped from the element. You can still reference it just like before.</note>

    </sect1>

    <sect1 id="ydother_ydbrowserinfo">

        <title>YDBrowserInfo</title>

        <para>The YDBrowserInfo object returns information about the browser that performed the request. The YDBrowserInfo will check the headers and extract information such as the version of the browser, the name of the browser and the platform on which the browser is running.</para>

        <para>The following code sample demonstrates how to use this class:</para>

        <programlisting><![CDATA[<?php

    $browser = new YDBrowserInfo()
    echo( $browser->agent );
    echo( $browser->browser );
    echo( $browser->version );
    echo( $browser->platform );
    echo( $browser->dotnet );
    echo( $browser->getBrowserLanguages() );
    echo( $browser->getLanguage( array( 'en', 'nl', 'fr' ) ) );

?>]]></programlisting>

        <para>The getBrowser function will return one of the following values: ie, safari, opera, mozilla or other. The getPlatform function will return one of the following values: win, mac, linux, unix or other.</para>

        <para>The getAgent function will return the full HTTP user agent string as provided by the browser.</para>

        <para>This class is very handy to display specific contents based on the browser of the user. You might e.g. specify a different stylesheet for Macintosh users compared to the stylesheet used for Windows users.</para>

        <para>The getLanguage function helps you to choose a language from a list of supported languages based on the supported languages from the browser. The getLanguage function will check the HTTP_ACCEPT_LANGUAGE header to find out which languages the browser supports. It will then check that against a list of languages that we gave as teh parameter to this function and will return the name of the most appropriate langauage. This function will also take into consideration the right priority of the languages specified by the browser. If no list of supported languages was specified, the framework will assume that only English is supported.</para>

    </sect1>

    <sect1 id="ydother_ydobjectutil">

        <title>YDObjectUtil</title>

        <para>The YDObjectUtil module provides you with some class and object related static functions. The following functions are available:</para>

        <itemizedlist spacing="compact">
            <listitem><emphasis role="bold">isSubClass:</emphasis> This function will check if the specified object is subclassed from the specified class name or is an instance of the specified classgetAncestors.</listitem>
            <listitem><emphasis role="bold">getAncestors:</emphasis> This function will list you the parent classes of a specific class.</listitem>
            <listitem><emphasis role="bold">failOnMissingMethod:</emphasis> This function will raise a fatal exception if the specified object doens't contain the specified function.</listitem>
            <listitem><emphasis role="bold">serialize:</emphasis> This function returns a gzipped stream containing a byte-stream representation of an object that can be stored anywhere.</listitem>
            <listitem><emphasis role="bold">unserialize:</emphasis> This function takes a single gzipped serialized variable (the output from the YDObjectUtil::serialize() function) and converts it back into a PHP value.</listitem>
        </itemizedlist>

        <note>all these functions have to be called statically and thus do not require an instance of the YDObjectUtil class.</note>

    </sect1>

    <sect1 id="ydother_ydbbcode">

        <title>YDBBCode</title>

        <para>The YDBBCode class implements a class that helps convert BB style tags to HTML. It's not really designed to be easy to extend, but it's more geared towards speed and efficiency. BBCode is a specific way of adding markup tags to text to indicate the formatting and is very popular in forums.</para>

        <para>The following BBCode is understood by the YDBBCode class:</para>

        <programlisting><![CDATA[[img]http://elouai.com/images/star.gif[/img]
[img=http://www.yellowduck.be/]http://elouai.com/images/star.gif[/img]
[url=http://elouai.com]eLouai[/url]
[url]http://elouai.com[/url]
[url=index.php?YD_DEBUG=1]Yellow Duck Framework examples[/url]
[url]index.php?YD_DEBUG=1[/url]
[mail=webmaster@elouai.com]Webmaster[/mail]
[mail]webmaster@elouai.com[/mail]
[email=webmaster@elouai.com]Webmaster[/email]
[email]webmaster@elouai.com[/email]
[color=red]RED[/color]
[b]bold[/b]
[i]italic[/i]
[u]underline[/u]
[code]value="123";[/code]
[quote]a quote[/quote]]]></programlisting>

        <para>The codes above will be converted to the following HTML code:</para>

        <programlisting><![CDATA[<img border="0" src="http://elouai.com/images/star.gif"><br />
<a target="_blank" href="http://www.yellowduck.be/"><img
    border="0" src="http://elouai.com/images/star.gif"></a><br />
<a target="_blank" href="http://elouai.com">eLouai</a><br />
<a target="_blank" href="http://elouai.com">http://elouai.com</a><br />
<a href="index.php?YD_DEBUG=1">Yellow Duck Framework examples</a><br />
<a href="index.php?YD_DEBUG=1">index.php?YD_DEBUG=1</a><br />
<a href="mailto:webmaster@elouai.com">Webmaster</a><br />
<a href="mailto:webmaster@elouai.com">webmaster@elouai.com</a><br />
<a href="mailto:webmaster@elouai.com">Webmaster</a><br />
<a href="mailto:webmaster@elouai.com">webmaster@elouai.com</a><br />
<font color="red">RED</font><br />
<b>bold</b><br />
<i>italic</i><br />
<u>underline</u><br />
<code>value="123";</code><br />
<blockquote>a quote</blockquote><br />]]></programlisting>

        <para>Additionally, as you can see, newlines are converted to <![CDATA[<br />]]> tags. The class will also converted non ascii characters to HTML entities.</para>

    </sect1>

</chapter>
